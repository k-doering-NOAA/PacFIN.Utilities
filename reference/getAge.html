<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Get age information for each fish — getAge • PacFIN.Utilities</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Get age information for each fish — getAge"><meta property="og:description" content="Get age information for each fish, or row of the data.
This functionality was originally in cleanAges, moved to
cleanPacFIN, and is now compartmentalized here, but called in
cleanPacFIN and stored in the Age column."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">PacFIN.Utilities</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Get age information for each fish</h1>
    
    <div class="hidden name"><code>getAge.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Get age information for each fish, or row of the data.
This functionality was originally in cleanAges, moved to
cleanPacFIN, and is now compartmentalized here, but called in
<a href="cleanPacFIN.html">cleanPacFIN</a> and stored in the <code>Age</code> column.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">getAge</span><span class="op">(</span><span class="va">Pdata</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">keep</span>, col.bestage <span class="op">=</span> <span class="st">"FISH_AGE_YEARS_FINAL"</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>Pdata</dt>
<dd><p>A data frame of biological samples
originating from the
Pacific Fishieries Information Network (PacFIN) data warehouse,
which originated in 2014. Data are pulled using sql calls, see
<code><a href="PullBDS.PacFIN.html">PullBDS.PacFIN</a>()</code>.</p></dd>


<dt>verbose</dt>
<dd><p>A logical specifying if output should be written to the
screen or not. Good for testing and exploring your data but can be turned
off when output indicates information that you already know. The printing
of output to the screen does not affect any of the returned objects. The
default is to always print to the screen, i.e., <code>verbose = TRUE</code>.</p></dd>


<dt>keep</dt>
<dd><p>A vector of values that represent what you want to keep.
Values of <code>NA</code>, <code>""</code>, and numeric values are acceptable.
Often, it is helpful to run `unique(, useNA = "always") on the relevant
data prior to running the function to see what types are present.</p></dd>


<dt>col.bestage</dt>
<dd><p>A character value noting the column name that contains the best age
to use going forward for a given fish. Over time, this has been
<code>FISH_AGE_YEARS_FINAL</code> and <code>FINAL_FISH_AGE_IN_YEARS</code> for PacFIN.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A vector of ages in years with a length the same as the number
of rows present in the input data frame <code>Pdata</code>.
If all ages are <code>NA</code>, then a vector of <code>NA</code> values is quickly returned.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Age types listed in keep (or derivatives of those) are used to filter
for ages that should be kept, i.e., not returned as <code>NA</code>.
If <code>FISH_AGE_YEARS_FINAL</code> doesn't have an entry, where this should be the
best age available, then the age reads in <code>age1</code>, <code>age2</code>, ... are
averaged over and rounded to the next integer
(i.e., <a href="https://rdrr.io/r/base/Round.html" class="external-link">ceiling</a>) if their methods are acceptable.
When <code>FISH_AGE_YEARS_FINAL</code> does have an entry, this age is kept if one of
the methods in <code>AGE_METHOD</code> is listed in <code>keep</code>. It is currently unclear
how <code>FISH_AGE_YEARS_FINAL</code> is determined because it doesn't always equal
the value from the first age reader. Sometimes, it is <code>ceiling(mean())</code>,
other times it appears to default to break and burn, and other random combos.
We use the best judgment of those who created the column that they know what
they are doing, but please feel free to report errors in PacFIN to the
github issues or the package maintainer after contacting the state representative.</p>
<p>The input argument of <code>keep</code> can contain a mix of numeric and character values,
but all values will be converted to character values. See below for conversions,
where it is easiest to just supply a vector of values shown on the left before
the double equal sign because all values in your data set to the right will be
converted prior to searching for those in <code>keep</code>.
For example, <code>keep = c("B", "L")</code> will keep all <code>"BB"</code>, <code>1</code>, and <code>6</code> entries as well.</p><ul><li><p>"B" == 1, "BB", or break and burn</p></li>
<li><p>"S" == 2, "SR" (California), or surface read</p></li>
<li><p>3 == scales (Oregon data)</p></li>
<li><p>"T" == 4, "TS" (California), "X" (Washington), or thin section</p></li>
<li><p>"O" == 5 or optical scanner</p></li>
<li><p>"L" == 6 or age derived from length</p></li>
<li><p>9 == unable to read or age</p></li>
<li><p>U == unknown</p></li>
</ul><p>The final age assigned to a fish when there are multiple age reads depends on the
ageing lab. See issue #49 for a semi-detailed discussion. Sometimes, reconciling
happens where the best age will not be equal to any age read from a specific reader
but the readers get together to determine the best read.
Washington uses the following order of operations to assign the best age given
there are multiple reads. Note, that they will never report more than three reads
because that is the limitation of their database.</p><ul><li><p>age1 if only one read;</p></li>
<li><p>randomly chosen age between age-read 1 and age-read 2 if the difference between
the two reads is less than three;</p></li>
<li><p>if the difference between two reads is more than three, then the best age is
manually keyed in from that designated by a human;</p></li>
<li><p>if three reads are equal, then the value is automatically assigned; and</p></li>
<li><p>if there are three reads and they are not equal then an age reader must choose
the final value.</p></li>
</ul></div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Kelli F. Johnson, Chantel R. Wetzel.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

